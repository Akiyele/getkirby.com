Title: Breaking Changes

----

Subtitle:

----

Text:

#### Core

- The method name `File::manipulate()` is no longer available for custom File methods as it’s now a core method. [https://github.com/getkirby/v4/pull/20](https://github.com/getkirby/v4/pull/20)
- Deprecated `Form\Options`, `Form\OptionsApi` and `Form\OptionsQuery` classes removed. Use `Option\Options`, `Option\OptionsApi` or `Option\OptionsQuery` instead. [https://github.com/getkirby/v4/pull/49](https://github.com/getkirby/v4/pull/49)
- Deprecated `Toolkit\Query` class has been removed. Use `Query\Query` instead. [https://github.com/getkirby/v4/pull/50](https://github.com/getkirby/v4/pull/50)
- `I18n::translate()`: If `$fallback` is an array and neither the array `$key` nor the array `$fallback` have a matching entry for the locale, the first element of the `$key` array  will now be returned (not anymore the one from `$fallback`). If `$fallback` is a string, it will be considered with priority over both of these.
- If overwriting the `hidden` field, it must return `'hidden' => true` now [#91](https://github.com/getkirby/v4/pull/91)
- Files: `focus` field and file method are now restricted for this use [#106](https://github.com/getkirby/v4/pull/106)
- `Kirby\Uuid\Uuid` is now an abstract class, child classes need to implement the `id` method [#154](https://github.com/getkirby/v4/pull/154)
- `Kirby\Uuid\Uuid::key()` can now also return `null` if the new `$generate` parameter isn't passed as `true` and no UUID has been yet generated for the model [#154](https://github.com/getkirby/v4/pull/154)
- Passing the `$slot` or `$slots` variables to snippets was deprecated and support has now finally been removed. [#181](https://github.com/getkirby/v4/pull/181)
- Errors are no longer hidden when a response is converted to a string, which could be seen as a breaking change. [#185](https://github.com/getkirby/v4/pull/185)
- When thumb generation fails, the image API now throws an error and no longer loads the original image. [#189](https://github.com/getkirby/v4/pull/189)

#### Panel

- `this.$library.autosize` has been removed, wrap `<textarea>` elements instead inside `<k-autosize>` element
- Defining the footer slot in `<k-dialog>` will no longer wrap the slot content in the `<footer>` element. This can now be more flexibly handled by using `<k-dialog-footer>` inside the slot. [#100](https://github.com/getkirby/v4/pull/100)
- The Form drawer no longer automatically closes on submit. This is introducing the same behaviour as in dialogs. Auto-closing might often not be the intended result of submitting the form and it's easier to close it manually in a submit handler than to re-open it again.
- `this.$store.state.isLoading` is no longer available. You can now use `window.panel.isLoading` or `this.$panel.isLoading` in Vue components to access the current loading state. [#138](https://github.com/getkirby/v4/pull/138)
- `this.$store.state.dialog` is no longer available. Use `this.$panel.dialog` instead. [#163](https://github.com/getkirby/v4/pull/163)
- Removed `this.$store.state.drag`, use `window.panle.drag`/`this.$panel.drag` instead [#171](https://github.com/getkirby/v4/pull/171)
