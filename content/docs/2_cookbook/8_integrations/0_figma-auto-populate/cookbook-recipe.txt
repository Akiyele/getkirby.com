Title: Populate your Figma designs with your Kirby's content

----

Text:

Whether you design yourself or work with a team of designers, today we're going to help you save hours of work and a few mistakes.

Let's learn how to create an API with Kirby that will help us fill our designs made in Figma almost magically!

This can be very useful in different cases, today —as an example— we will focus on Instagram.

As an agency it often happens to us that the websites we create are the epicentre of a lot of data and publications such as Testimonials, Blog, Professional Profiles (CVs), etc.
Why don't we use all of this data to streamline the creation of content for our social networks?

For example, why don't we create a design for blog posts? One for the Instagram's feed and another one as an Story.

First we must export the fields we need for each post. I have thought about the  `title`, the `date` an `image` and an extract of the `text`. We will print them in JSON.

In your Kirby blog you should have a template called, for example, `blog.php`. Well, what we'll do is create a new template called `blog.json.php`.

<info>
It is important to note that for  `blog.json.php` to work correctly, the template `blog.php` must exist previously..
</info>

```php "/site/templates/blog.json.php"
<?php

// Let's get, for example, the last 20 posts.
$posts = $page->children()->listed()->sortBy('date', 'desc')->limit(20);
// Initialize the $json array
$json = [];

foreach($posts as $post) {

// We loop through the fields we need and put them into the array.
// Note that in this case I use 'date.handler' => 'strftime' in Kirby's config.php to format the date
// with html::decode we remove the HTML that Figma cannot parse
  $json[] = [
    'title'  => (string) html::decode($post->title()),
    'imagen' => (string) $post->image()->resize(1080,null,80)->url(),
    'date'   => (string) $post->date()->toDate('%d %B, %Y'),
    'text'   => (string) html::decode($post->text()->excerpt(150)),
  ];

}

echo json_encode($json);
```

Now when you access your `domain.com/blog.json` You will see the last 20 posts formatted in JSON, nice isn't it?

(image: json.png)

Now we will move on to Figma, we are going to design a Post for the Feed and another one for a Story. Something simple like this:

(image: figma1.png)

<info>
It's important that the titles of the layers are the same as the keys of the JSON file we have created: `title, imagen, date, text`.
The image will be a rectangle with the Fill as an image.
</info>

Ok, now let's connect the content we have in Kirby with our designs in Figma. How do we do it? With the "JSON to Figma" Plugin:
(image: json-to-figma.png)

We import the JSON from the URL of our website, it will be something like this: `yourwebpage.com/blog.json`. We copy that URL and click on the "From Clipboard Link" button of the plugin.

Select, for example, the Frame “Instagram post - 1” and the keys (in the plugin) that we will use, then click on the **“Populate selected”** button:

(image: figma-4.png)

And "automagically" our design will be filled with the last post that we have published in Kirby. The only thing left to do is to export the Frame as an image and publish it on our Instagram.

This is very simple, but imagine all that can be automated in this way, I hope it can be useful for your Workflow.

(image: figma-5.png)




----

Published: 2022-04-06

----

Description: Adapt the Panel's look & feel to your brand

----

Authors: - authors/isaac-bordons